# Justin's Agent - Web Scraping & Lead Scoring System

A minimal two-file Python system for scraping websites and evaluating them for lead qualification using Google Gemini Pro.

## ðŸŠ Features

- **Web Crawler** (`crawler.py`): Scrapes up to 20 internal pages of any website
- **Lead Scorer** (`scorer.py`): Uses Google Gemini 2.0 Flash to evaluate websites based on custom criteria
- **Streamlit App** (`app.py`): Beautiful web interface for the entire pipeline
- **Clean Text Extraction**: Removes HTML tags and extracts readable content
- **Page Segmentation**: Clearly marks content from each page with `[PAGE: URL]`
- **Comprehensive Scoring**: Evaluates 5 key criteria for lead qualification

## ðŸš€ Quick Start

### 1. Install Dependencies

```bash
pip install -r requirements.txt
```

### 2. API Key Setup

The app uses a pre-configured API key for the Orange Slice Agent. No setup required!

**For local development only:**
If you want to run this locally with your own API key:
1. Visit [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Create a new API key
3. Create a `.env` file:
   ```bash
   echo "GOOGLE_API_KEY=your_api_key_here" > .env
   ```

### 3. Scrape a Website

```bash
python crawler.py https://example.com
```

This will:
- Crawl up to 20 internal pages
- Extract clean text from each page
- Save results to `website_context.txt`

### 4. Score the Website

```bash
python scorer.py
```

This will:
- Read the scraped content
- Send it to Google Gemini 2.0 Flash for analysis
- Display detailed scoring results
- Save results to `scoring_results.json`

### 5. ðŸš€ Or Use the Streamlit Web App (Recommended)

```bash
streamlit run app.py
```

This opens a beautiful web interface where you can:
- Enter any website URL
- Configure crawling settings
- Run the entire pipeline with one click
- View results in a beautiful, interactive format
- Download results as JSON or text files

## ðŸ“Š Scoring Criteria

The system evaluates websites across 5 key criteria (20 points each, 100 total):

### 1. **Low Price Point (< $200)** - 20 points
- Looks for items priced under $200
- Lists specific examples with prices

### 2. **Multi-Channel Selling** - 20 points
- Checks for presence on: Temu, Shein, Alibaba, **Amazon**, **Etsy**, **eBay**, **Instagram**, Facebook, Poshmark, TikTok, **D2C Website**, **Shopify**
- Higher scoring for bolded channels

### 3. **Contact Info Present** - 20 points
- Email addresses, phone numbers, social media handles
- Bonus for decision-maker contact info

### 4. **Vertical Integration** - 20 points
- Evidence of factory relationships, wholesale operations
- Mentions of Faire, Etsy Wholesale, etc.

### 5. **Recent Social Media Activity** - 20 points
- Social posts from 2023-2025
- Instagram or Facebook activity

## âŒ Disqualification Criteria

Websites are automatically disqualified if they have:
- All items priced over $200
- Outdated appearance (Wix, WordPress, poor maintenance)
- No social posts after 2022 (except wholesale)
- Keywords: "diamonds", "engagement rings", "custom", "handcrafted", "handmade"

## ðŸ“ File Structure

```
justin/
â”œâ”€â”€ crawler.py              # Web scraping script
â”œâ”€â”€ scorer.py               # Lead scoring script
â”œâ”€â”€ app.py                  # Streamlit web interface
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ README.md              # This file
â”œâ”€â”€ website_context.txt    # Generated by crawler.py
â””â”€â”€ scoring_results.json   # Generated by scorer.py
```

## ðŸ”§ Usage Examples

### Basic Usage
```bash
# Scrape a jewelry website
python crawler.py https://jewelrystore.com

# Score the scraped content
python scorer.py
```

### Web App Usage (Recommended)
```bash
# Launch the Streamlit web interface
streamlit run app.py

# Then simply:
# 1. Paste a website URL
# 2. Click "Analyze Website"
# 3. View beautiful results!
```

### Advanced Usage
```bash
# Scrape with custom domain
python crawler.py etsy.com

# The system will automatically add https:// if needed
python crawler.py example.com
```

## ðŸ“‹ Output Files

### `website_context.txt`
Contains cleaned text from all scraped pages, formatted as:
```
[PAGE: https://example.com]
Clean text content from the homepage...

[PAGE: https://example.com/about]
Clean text content from the about page...
```

### `scoring_results.json`
Structured JSON with detailed scoring:
```json
{
  "total_score": 87,
  "disqualified": false,
  "disqualification_reasons": [],
  "scores": {
    "price": {
      "score": 18,
      "examples": [
        {"item": "Silver necklace", "price": "$45"}
      ]
    },
    "channels": {
      "score": 15,
      "found_channels": ["Instagram", "Shopify"]
    }
  },
  "summary": "This site is a good fit..."
}
```

## ðŸ› ï¸ Technical Details

### Crawler Features
- **Respectful Crawling**: 1-second delays between requests
- **Internal Links Only**: Stays within the same domain
- **Error Handling**: Gracefully handles failed requests
- **User-Agent**: Mimics real browser requests
- **Unicode Support**: Handles international content

### Scorer Features
- **Structured Output**: Returns valid JSON for programmatic use
- **Evidence-Based**: Only uses information explicitly found in content
- **Comprehensive Analysis**: Evaluates all 5 criteria with detailed reasoning
- **Error Recovery**: Handles API failures gracefully

## ðŸ”’ Privacy & Ethics

- Only scrapes publicly accessible content
- Respects robots.txt (manual implementation)
- Includes delays to avoid overwhelming servers
- Uses content only for lead qualification analysis

## ðŸ› Troubleshooting

### Common Issues

**"Google API key not found"**
```bash
export GOOGLE_API_KEY="your_actual_api_key"
```

**"website_context.txt not found"**
```bash
# Run crawler first
python crawler.py https://example.com
```

**"Error crawling URL"**
- Check if the website is accessible
- Some sites may block automated requests
- Try a different website

**"Could not extract JSON from Gemini response"**
- Check your API key is valid
- Ensure you have sufficient API quota
- Try running the scorer again

## ðŸ“ˆ Sample Output

```
Justin's Agent - Lead Scoring System
==================================================
Analyzing website content with Google Gemini 2.0 Flash...
--------------------------------------------------

============================================================
LEAD SCORING RESULTS
============================================================
Total Score: 87/100
Status: âœ… QUALIFIED

------------------------------------------------------------
DETAILED SCORES
------------------------------------------------------------
ðŸ’° Price Point (< $200): 18/20
  Examples:
    â€¢ Silver heart necklace: $45
    â€¢ Gold-plated studs: $35

ðŸ›’ Multi-Channel Selling: 15/20
  Found channels: Instagram, Shopify, Amazon

ðŸ“ž Contact Info: 20/20
  Found: email, Instagram DM

ðŸ­ Vertical Integration: 10/20
  Evidence: Mentions Etsy Wholesale and factory sourcing

ðŸ“± Recent Social Activity: 14/20
  Evidence: Last Instagram post: Jan 2024

------------------------------------------------------------
SUMMARY
------------------------------------------------------------
This site is a good fit. It sells low-cost jewelry with multiple 
channels including Shopify and Instagram, provides contact info, 
and has a recent Instagram post.
============================================================
Results saved to scoring_results.json
```

## ðŸ¤ Contributing

This is a minimal system designed for Justin's Agent. Feel free to modify the scoring criteria or add new features as needed.

## ðŸš€ Deployment

See [DEPLOYMENT.md](DEPLOYMENT.md) for detailed instructions on deploying to Streamlit Cloud.

### Quick Deploy

1. Create a GitHub repository
2. Push this code to GitHub
3. Deploy on [Streamlit Cloud](https://share.streamlit.io)
4. Add your API key in Streamlit Cloud secrets

## ðŸ“„ License

This project is for internal use by Justin's Agent. 